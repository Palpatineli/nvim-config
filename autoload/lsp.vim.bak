let settings = {
\"pyls" : {
\  "enable" : v:true,
\  "trace" : { "server" : "verbose", },
\  "commandPath" : "",
\  "configurationSources" : [ "pycodestyle" ],
\  "plugins" : {
\    "jedi_completion" : { "enabled" : v:true, },
\    "jedi_hover" : { "enabled" : v:true, },
\    "jedi_references" : { "enabled" : v:true, },
\    "jedi_signature_help" : { "enabled" : v:true, },
\    "jedi_symbols" : {
\      "enabled" : v:true,
\      "all_scopes" : v:true,
\    },
\    "mccabe" : {
\      "enabled" : v:true,
\      "threshold" : 15,
\    },
\    "preload" : { "enabled" : v:true, },
\    "pycodestyle" : { "enabled" : v:true, },
\    "pydocstyle" : {
\      "enabled" : v:false,
\      "match" : "(?!test_).*\\.py",
\      "matchDir" : "[^\\.].*",
\    },
\    "pyflakes" : { "enabled" : v:true, },
\    "pyls_mypy": {
\      "enabled": v:true,
\      "live_mode": v:false,
\    },
\    "rope_completion" : { "enabled" : v:true, },
\    "yapf" : { "enabled" : v:true, },
\  }
\}
\}

call nvim_lsp#setup("pyls", settings)
" disable preview window
set completeopt-=preview
" use omni completion provided by lsp
set omnifunc=lsp#omnifunc<Paste>

nnoremap <silent> <leader>dc :call lsp#text_document_declaration()<cr>
nnoremap <silent> <leader>df :call lsp#text_document_definition()<CR>
nnoremap <silent> <leader>h  :call lsp#text_document_hover()<CR>
nnoremap <silent> <leader>i  :call lsp#text_document_implementation()<CR>
nnoremap <silent> <leader>s  :call lsp#text_document_signature_help()<CR>
nnoremap <silent> <leader>td :call lsp#text_document_type_definition()<CR>
